{"type_of":"article","id":232000,"title":"A Few Things I Do Every Time I Start A New Gatsby Site","description":"","cover_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--Fd9xZrc---/c_imagga_scale,f_auto,fl_progressive,h_420,q_auto,w_1000/https://res.cloudinary.com/practicaldev/image/fetch/s--hJtH-4BN--/c_imagga_scale%2Cf_auto%2Cfl_progressive%2Ch_420%2Cq_auto%2Cw_1000/https://thepracticaldev.s3.amazonaws.com/i/bbv0za6zszoo3jlaor2c.jpg","readable_publish_date":"Jan 17","social_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--ou79CkCF--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/https://res.cloudinary.com/practicaldev/image/fetch/s--hJtH-4BN--/c_imagga_scale%2Cf_auto%2Cfl_progressive%2Ch_420%2Cq_auto%2Cw_1000/https://thepracticaldev.s3.amazonaws.com/i/bbv0za6zszoo3jlaor2c.jpg","slug":"a-few-things-i-do-every-time-i-start-a-new-gatsby-site-5gd","path":"/shelob9/a-few-things-i-do-every-time-i-start-a-new-gatsby-site-5gd","url":"https://dev.to/shelob9/a-few-things-i-do-every-time-i-start-a-new-gatsby-site-5gd","canonical_url":"https://dev.to/shelob9/a-few-things-i-do-every-time-i-start-a-new-gatsby-site-5gd","comments_count":9,"positive_reactions_count":54,"collection_id":null,"created_at":"2020-01-04T17:06:23Z","edited_at":"2020-01-19T23:41:32Z","crossposted_at":null,"published_at":"2020-01-17T21:58:10Z","last_comment_at":"2020-01-20T00:13:39Z","published_timestamp":"2020-01-17T21:58:10Z","tag_list":"gatsby, javascript, react, npm","tags":["gatsby","javascript","react","npm"],"body_html":"<p>I'm a big fan of Gatsby.js. It powers <a href=\"https://joshpress.net\">my blog</a> and a <a href=\"\">my other random sites</a>. I've been trying our some starters recently -- trying out <a href=\"https://tinacms.org/\">TinaCMS</a> and <a href=\"https://github.com/geocine/gatsby-starter-devto\">to display my dev.to posts on my own domain</a>.</p>\n\n<p>I started keeping a list of what I do every time I start a Gatsby site, so I'll remember next time, and thought I would share.</p>\n\n<h2>\n  <a name=\"upgrade-all-of-the-dependencies\" href=\"#upgrade-all-of-the-dependencies\" class=\"anchor\">\n  </a>\n  Upgrade All Of The Dependencies\n</h2>\n\n<p>There are so many cool Gatsby starters out there. It makes starting up a site fairly painless and saves a ton of time. Before I start working with a starter, I like to set all of the dependencies to the latest versions. I use <a href=\"https://yarnpkg.com/lang/en/docs/cli/upgrade-interactive/\">my favorite yarn command</a> for this:<br>\n</p>\n\n<div class=\"highlight\"><pre class=\"highlight shell\"><code>yarn upgrade-interactive <span class=\"nt\">--latest</span>\n</code></pre></div>\n\n\n\n<p>This might break everything. I'd like to know early on if using a starter is going to force me to stick with an out of date version of Gatsby, React, etc or take work to update.</p>\n\n<h2>\n  <a name=\"use-yarn\" href=\"#use-yarn\" class=\"anchor\">\n  </a>\n  Use Yarn\n</h2>\n\n<p>I prefer yarn to npm. I run a find and replace in package.json for \"npm run\" and replace it with \"yarn\". I also delete package.lock.</p>\n\n<h2>\n  <a name=\"add-a-language-attribute\" href=\"#add-a-language-attribute\" class=\"anchor\">\n  </a>\n  Add A Language Attribute\n</h2>\n\n<p>When I look at a demo of a Gatsby starter, I always use the <a href=\"https://chrome.google.com/webstore/detail/axe-web-accessibility-tes/lhdoppojpmngadmnindnejefpokejbdd?hl=en-US\">aXe accessibility tester Chrome extension</a> to make sure I'm not going to end up with a ton of bugs to fix in the generated HTML. <strong>Almost</strong> all the time, I see this violation:<br>\n</p>\n\n<div class=\"highlight\"><pre class=\"highlight shell\"><code>&lt;html&gt; element must have a lang attribute\n</code></pre></div>\n\n\n\n<p>This issue is considered serious and is <a href=\"https://dequeuniversity.com/rules/axe/3.4/html-has-lang?application=AxeChrome\">explained in depth here</a>. It has a simple fix in most Gatsby starters and themes.</p>\n\n<p>Presuming that <a href=\"https://github.com/nfl/react-helmet/\">Helmet</a> is being used, you can use an <code>htmlAttributes</code> prop to set an attribute on the <code>&lt;html&gt;</code> element:<br>\n</p>\n\n<div class=\"highlight\"><pre class=\"highlight jsx\"><code><span class=\"o\">&lt;</span><span class=\"nx\">Helmet</span> <span class=\"nx\">title</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">config</span><span class=\"p\">.</span><span class=\"nx\">siteMetadata</span><span class=\"p\">.</span><span class=\"nx\">title</span><span class=\"p\">}</span> <span class=\"nx\">htmlAttributes</span><span class=\"o\">=</span><span class=\"p\">{{</span> <span class=\"na\">lang</span><span class=\"p\">:</span> <span class=\"dl\">'</span><span class=\"s1\">en</span><span class=\"dl\">'</span> <span class=\"p\">}}</span> <span class=\"sr\">/</span><span class=\"err\">&gt;\n</span></code></pre></div>\n\n\n\n<h2>\n  <a name=\"add-some-plugins\" href=\"#add-some-plugins\" class=\"anchor\">\n  </a>\n  Add Some Plugins\n</h2>\n\n<p>Gatsby plugins are super helpful. I always want to try and get the benefits of offline caching of a PWA and the security of implimenting CSP headers, so I add these two plugins:</p>\n\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-csp/\">Content Security Policy</a></li>\n<li><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-offline/?=offline\">Offline</a></li>\n</ul>\n\n<p>Here is <a href=\"https://alligator.io/gatsbyjs/gatsby-pwa/\">a good article</a> on PWAs and Gatsby.</p>\n\n<h2>\n  <a name=\"what-else-do-you-do\" href=\"#what-else-do-you-do\" class=\"anchor\">\n  </a>\n  What Else Do You Do?\n</h2>\n\n<p>That's my list, for now. </p>\n\n<blockquote>\n<p>What did I miss? <a href=\"https://twitter.com/josh412\">Let me know on Twitter @Josh412</a> or leave a comment ðŸ‘‡</p>\n</blockquote>\n\n","body_markdown":"I'm a big fan of Gatsby.js. It powers [my blog](https://joshpress.net) and a [my other random sites](). I've been trying our some starters recently -- trying out [TinaCMS](https://tinacms.org/) and [to display my dev.to posts on my own domain](https://github.com/geocine/gatsby-starter-devto).\n\nI started keeping a list of what I do every time I start a Gatsby site, so I'll remember next time, and thought I would share.\n\n## Upgrade All Of The Dependencies\n\nThere are so many cool Gatsby starters out there. It makes starting up a site fairly painless and saves a ton of time. Before I start working with a starter, I like to set all of the dependencies to the latest versions. I use [my favorite yarn command](https://yarnpkg.com/lang/en/docs/cli/upgrade-interactive/) for this:\n\n```bash\nyarn upgrade-interactive --latest\n```\n\nThis might break everything. I'd like to know early on if using a starter is going to force me to stick with an out of date version of Gatsby, React, etc or take work to update.\n\n## Use Yarn\n\nI prefer yarn to npm. I run a find and replace in package.json for \"npm run\" and replace it with \"yarn\". I also delete package.lock.\n\n## Add A Language Attribute\n\nWhen I look at a demo of a Gatsby starter, I always use the [aXe accessibility tester Chrome extension](https://chrome.google.com/webstore/detail/axe-web-accessibility-tes/lhdoppojpmngadmnindnejefpokejbdd?hl=en-US) to make sure I'm not going to end up with a ton of bugs to fix in the generated HTML. **Almost** all the time, I see this violation:\n\n```bash\n<html> element must have a lang attribute\n```\n\nThis issue is considered serious and is [explained in depth here](https://dequeuniversity.com/rules/axe/3.4/html-has-lang?application=AxeChrome). It has a simple fix in most Gatsby starters and themes.\n\nPresuming that [Helmet](https://github.com/nfl/react-helmet/) is being used, you can use an `htmlAttributes` prop to set an attribute on the `<html>` element:\n\n```jsx\n<Helmet title={config.siteMetadata.title} htmlAttributes={{ lang: 'en' }} />\n```\n\n## Add Some Plugins\n\nGatsby plugins are super helpful. I always want to try and get the benefits of offline caching of a PWA and the security of implimenting CSP headers, so I add these two plugins:\n\n* [Content Security Policy](https://www.gatsbyjs.org/packages/gatsby-plugin-csp/)\n* [Offline](https://www.gatsbyjs.org/packages/gatsby-plugin-offline/?=offline)\n\nHere is [a good article](https://alligator.io/gatsbyjs/gatsby-pwa/) on PWAs and Gatsby.\n\n\n## What Else Do You Do?\n\nThat's my list, for now. \n\n\n> What did I miss? [Let me know on Twitter @Josh412](https://twitter.com/josh412) or leave a comment ðŸ‘‡\n\n","user":{"name":"Josh Pollock","username":"shelob9","twitter_username":"Josh412","github_username":"Shelob9","website_url":"https://JoshPress.net","profile_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--0WBb8dNZ--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/63421/1ce6f212-f8bc-417a-b61e-92a6743899dd.jpg","profile_image_90":"https://res.cloudinary.com/practicaldev/image/fetch/s--8WFtOwoJ--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/63421/1ce6f212-f8bc-417a-b61e-92a6743899dd.jpg"}}